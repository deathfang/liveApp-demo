/* 
 * Cation 
 * shoe11414255@qq.com 
 * http://www.itisxiong.com
 * 2014-10-18
 */
define("dist/view/demo/app",["dist/component/show/show","dist/component_module/touch/touch","dist/component_module/media/media","dist/component_module/mPage/mPage","dist/component_module/preLoad/preLoad","dist/component_module/svgAni/svgAni","dist/component_module/gifAni/gifAni","./js/event"],function(t,e,i){function n(){this.page=null,this.pageWrap=null}var s=t("dist/component/show/show");t("dist/component_module/touch/touch");var o=t("dist/component_module/media/media"),a=t("dist/component_module/mPage/mPage"),r=t("dist/component_module/preLoad/preLoad"),h=t("dist/component_module/svgAni/svgAni"),p=t("dist/component_module/gifAni/gifAni");t("./js/event");var c=RES_DIR+IMG_DIR,u="?vision="+JS_VISION;window.c_data=[{name:"show",module:"imgText",pageBg:c+"1.jpg"+u},{name:"show",module:"imgText",pageBg:c+"2.jpg"+u,gifAniImg:c+"gifAni.gif"+u},{name:"show",module:"imgText",pageBg:c+"3.jpg"+u,svg:!0,svg_width:$(window).width(),svg_height:$(window).height()},{name:"show",module:"imgText",pageBg:c+"4.jpg"+u}],n.prototype={init:function(){this.componentCreate(),this.styleInit()},styleInit:function(){$(window).on("touchmove scroll",function(t){t.preventDefault()}),document.body.style.userSelect="none",document.body.style.mozUserSelect="none",document.body.style.webkitUserSelect="none",$(window).on("orientationchange",function(){switch(window.orientation){case 0:$(".app").removeClass("j-landscape");break;case 180:$(".app").removeClass("j-landscape");break;case-90:$(".app").addClass("j-landscape");break;case 90:$(".app").addClass("j-landscape")}}),0>=this.page.size()&&console.log("组件初始化失败！！");var t=$(window).height();this.pageWrap.height(t),this.page.height(t)},componentCreate:function(){for(var t=$(".app-content .p-ct .pageWrap"),e=0,i=c_data.length;i>e;e++){var n=c_data[e];this.componentSelect(t,n)}this.pageWrap=$(".p-ct .pageWrap"),this.page=$(".p-ct").find(".pageWrap .m-page"),this.resControl()},componentSelect:function(t,e){var e=e||{},i=e?e.name:"";switch(i){case"show":new s(t,e);break;default:return}},resControl:function(){var t=this,e=$(window).width(),i=$(window).height();new p({}),new o(RES_DIR+"view/demo/media/media.mp3",".u-music",{audioAutoPlay:!0});var n=["1.jpg","2.jpg","3.jpg","4.jpg"];new r(n,".progress",{prefix:c,progressInit:!1,vision:JS_VISION,events:{preLoadComplete:[function(){t.openApp()}]}});var s=new a(".pageWrap",".m-page",{width:e,height:i,single:!1,scale:.5,moveY:2});s.on("mPageSuccess",function(t){var e=t.next.querySelectorAll("svg");if(e.length>0)for(var i=0,n=e.length;n>i;i++){var s=new h(e[i]);$(e[i]).removeClass("f-hide"),s.render()}})},openApp:function(){$(".app-content").removeClass("f-hide"),setTimeout(function(){$(".app-content").addClass("z-show"),setTimeout(function(){$(".app-loading").addClass("f-hide")},1e3)},20)}},i.exports=new n}),define("dist/component/show/show",[],function(t,e,i){function n(t,e){this.data=e?e:"",this.dom="object"==typeof t?t:$(t),this.domObj=null,this.events={},this.render()}t("./c.css");var s=t("./c.tpl");n.prototype={render:function(){var t,e;this.data?(t=template.compile(s),e=t(this.data)):e=s,e=$(e),this.domObj=e,this.dom.append(e),this.style(),this.bindEvents(),delete this.dom},style:function(){},bindEvents:function(){},emit:function(t){if(this.events[t]){var e=0,i=this.events[t].length;if(i)for(;i>e;e++)this.events[t][e].apply(this,[].slice.call(arguments,1))}},on:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}},i.exports=n}),define("dist/component/show/c.css",[],function(){seajs.importStyle(".m-imgText .gifAni{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}")}),function(t,e){var i="function"==typeof define,n="undefined"!=typeof module&&module.exports;i?define("dist/component_module/touch/touch",[],e):n?module.exports=e():this[t]=e()}("$",function(){function t(t,e,i,n){return Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down"}function e(){p=null,u.last&&(u.el.trigger("longTap"),u={})}function i(){p&&clearTimeout(p),p=null}function n(){a&&clearTimeout(a),r&&clearTimeout(r),h&&clearTimeout(h),p&&clearTimeout(p),a=r=h=p=null,u={}}function s(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function o(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}if(!(window.jQuery||window.Zepto||window.$))throw Error("WEIXIN falls back to jQuery or Zepto, which must first be loaded.");var a,r,h,p,c,u={},d=750;return $(document).ready(function(){var l,g,m,f,v=0,w=0;"MSGesture"in window&&(c=new MSGesture,c.target=document.body),$(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":-1>t.velocityX?"Left":t.velocityY>1?"Down":-1>t.velocityY?"Up":null;e&&(u.el.trigger("swipe"),u.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(t){(!(f=o(t,"down"))||s(t))&&(m=f?t:t.touches[0],t.touches&&1===t.touches.length&&u.x2&&(u.x2=void 0,u.y2=void 0),l=Date.now(),g=l-(u.last||l),u.el=$("tagName"in m.target?m.target:m.target.parentNode),a&&clearTimeout(a),u.x1=m.pageX,u.y1=m.pageY,g>0&&250>=g&&(u.isDoubleTap=!0),u.last=l,p=setTimeout(e,d),c&&f&&c.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(f=o(t,"move"))||s(t))&&(m=f?t:t.touches[0],i(),u.x2=m.pageX,u.y2=m.pageY,v+=Math.abs(u.x1-u.x2),w+=Math.abs(u.y1-u.y2))}).on("touchend MSPointerUp pointerup",function(e){(!(f=o(e,"up"))||s(e))&&(i(),u.x2&&Math.abs(u.x1-u.x2)>30||u.y2&&Math.abs(u.y1-u.y2)>30?h=setTimeout(function(){u.el.trigger("swipe"),u.el.trigger("swipe"+t(u.x1,u.x2,u.y1,u.y2)),u={}},0):"last"in u&&(30>v&&30>w?r=setTimeout(function(){var t=$.Event("tap");t.cancelTouch=n,u.el.trigger(t),u.isDoubleTap?(u.el&&u.el.trigger("doubleTap"),u={}):a=setTimeout(function(){a=null,u.el&&u.el.trigger("singleTap"),u={}},250)},0):u={}),v=w=0)}).on("touchcancel MSPointerCancel pointercancel",n),$(window).on("scroll",n)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){$.fn[t]=function(e){return this.on(t,e)}}),$}),function(t,e){var i="function"==typeof define,n="undefined"!=typeof module&&module.exports;i?define("dist/component_module/media/media",[],e):n?module.exports=e():this[t]=e()}("Media",function(){function t(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function e(t,e,i,n){n=n?!0:!1,t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function n(t,e,i,n){n=n?!0:!1,t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null}function s(t,e,n){if(!window.HTMLAudioElement)throw Error("对不起，您的浏览器版本过低，不支持音频的播放！！");var s=arguments.length;if(!(r(t)&&"AUDIO"==t.tagName||a(t)&&h.test(t)))throw Error("传入的audio参数，必须是音频对象或者是正确的音频地址值！！");2===s&&(r(e)||a(e)?n=void 0:!r(e)&&o(e)&&(n=e,e=void 0)),r(t)?this.audio=t:this.audioSrc=t,this.wrapper=void 0===e?window.document.body:a(e)?document.querySelector(e):e,this.events={},this.wrapperEvent="click",this.wrapperEventInit=!0,this.audioLoop="loop",this.audioPreLoad="audo",this.audioAutoPlay=!0;for(i in n)this[i]=n[i];this.init()}var o=t("Object"),a=t("String");Array.isArray||t("Array"),t("Function");var r=function(t){return null!=t&&t instanceof window.Element&&t.nodeType==t.ELEMENT_NODE};window.__Media=[];var h=/(HTMLAudioElement)|(\.(ogg|mp3|wav)$)/;return s.prototype={init:function(){this.audioCreate(),this.initEvents(!1),this.emit("mediaInit")},handleEvent:function(t){switch(t.type){case"play":this._play(t);break;case"pause":this._pause(t);break;case"tap":case"click":case"touchstart":case"mousedown":this._action(t)}},initEvents:function(t){var i=t?n:e,s=this.wrapper,o=this.audio;i(o,"play",this),i(o,"pause",this),i(s,this.wrapperEvent,this),t?this.emit("mediaDestory"):this.emit("mediaCreate")},emit:function(t){if(this.events[t]){var e=0,i=this.events[t].length;if(i)for(;i>e;e++)this.events[t][e].apply(this,[].slice.call(arguments,1))}},on:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},audioCreate:function(){if(this.audio){var t=this.audio.src;if(!h.test(t))throw Error("audio-Element对象，音频地址值不正确！！")}else this.audioSrc&&(this.audio=new Audio,this.audio.src=this.audioSrc);var e={loop:this.audioLoop,preload:this.audioPreLoad,autoplay:this.audioAutoPlay};for(var i in e)e.hasOwnProperty(i)&&i in this.audio&&(this.audio[i]=e[i]);this.wrapper.appendChild(this.audio),this.audio.load(),window.__Media.push(this.audio),this.emit("mediaAudioCreate")},_play:function(){for(var t=window.__Media,e=t.length,i=0;e>i;i++)t[i]!=this.audio&&t[i].pause();this.emit("mediaPlay")},_pause:function(){this.emit("mediaPause")},_action:function(){this.wrapperEventInit&&(this.audio.paused?this.audio.play():this.audio.pause()),this.emit("mediaAction")}},s}),function(t,e){var i="function"==typeof define,n="undefined"!=typeof module&&module.exports;i?define("dist/component_module/mPage/mPage",[],e):n?module.exports=e():this[t]=e()}("MPage",function(){"use strict";function t(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function e(t,e){var i,n;if(g(t)){for(i=0;t.length>i;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t}function i(t,e,i,n){n=n?!0:!1,t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function n(t,e,i,n){n=n?!0:!1,t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null}function s(t,e){var i=RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)}function o(t,e){if(!s(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}}function a(t,e){if(s(t,e)){var i=RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}}function r(t){for(var e,i=["webkit","moz","ms","o",""],n=0,s=i.length,o=t.charAt(0).toUpperCase()+t.substr(1);s>n;n++)if(e=i[n]+(i[n]?o:t),e in m)return i[n];return!1}function h(t){return r(t)===!1?!1:""===r(t)?t:r(t)+t.charAt(0).toUpperCase()+t.substr(1)}function p(){return h("perspective")?" translateZ(0)":""}function c(t,e,i){if(this.wrapper=void 0===t||""==t?window.document.body:u(t)?document.querySelector(t):t,!l(this.wrapper))throw Error("传入的wrapper-Element元素不准确，请确认上传！");this.page=void 0===e||""==e?this.wrapper.children:d(e)?this.page:this.wrapper.querySelectorAll(e),this.options={isStart:!1,isTouch:!0,isPointerTouch:!0,ImgTouch:!1,pageStyle:{},cycle:!0,firstChange:!1,resizePolling:60,pageNow:0,single:!0,scale:0,moveY:1,easingType:"cubic-bezier(0.1, 0.57, 0.1, 1)",HWCompositing:!0,useTransition:!0,useTransform:!0,translateThreshold:100,transitionTime:800,transitionProperty:"left, -"+r("transform")+"-transform"};for(var n in i)this.options[n]=i[n];this.options.useTransition=h("transform")!==!1&&this.options.useTransition,this.options.useTransform=h("transition")in m&&this.options.useTransform,this.hasTouch=this.options.isTouch&&"ontouchstart"in window,this.hasPointer=this.options.isPointerTouch&&navigator.msPointerEnabled,this.hasMouse=!this.hasTouch&&!this.hasPointer&&"onmousedown"in window,this.pageNow=this.options.pageNow?this.options.pageNow:0,this.pageNum=this.page.length,this.events={},this.x=0,this.y=0,this.init()}t("Object");var u=t("String"),d=Array.isArray||t("Array");t("Function");var l=function(t){return null!=t&&t.nodeType==t.ELEMENT_NODE},g=function(t){return"number"==typeof t.length};Function.prototype.bind=Function.prototype.bind||function(t){var e=this;return function(i){d(i)||(i=[i]),e.apply(t,i)}};var m=document.createElement("div").style,f={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,mouseout:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3};return c.prototype={init:function(){this.style(),this.refresh(),this.initEvents(this.options.isStart)},emit:function(t){if(this.events[t]){var e=0,i=this.events[t].length;if(i)for(;i>e;e++)this.events[t][e].apply(this,[].slice.call(arguments,1))}},on:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"MSPointerOut":case"mouseup":case"mouseout":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t)}},initEvents:function(t){var s=this,o=t?n:i,a=this.wrapper;o(window,"orientationchange",this),o(window,"resize",this),this.hasMouse&&(o(a,"mousedown",this),o(a,"mousemove",this),o(a,"mousecancel",this),o(a,"mouseup",this),o(a,"mouseout",this)),this.hasPointer&&(o(a,"MSPointerDown",this),o(a,"MSPointerMove",this),o(a,"MSPointerCancel",this),o(a,"MSPointerUp",this),o(a,"MSPointerOut",this)),this.hasTouch&&(o(a,"touchstart",this),o(a,"touchmove",this),o(a,"touchcancel",this),o(a,"touchend",this)),e(this.page,function(t,e){o(e,"transitionend",s),o(e,"webkitTransitionEnd",s),o(e,"oTransitionEnd",s),o(e,"MSTransitionEnd",s)}),t?this.emit("mPageDestory"):this.emit("mPageCreate")},style:function(){var t=this;"absolute"!=this.wrapper.style.position&&(this.wrapper.style.position="relative"),e(this.page,function(e,i){i.style.cssText="display:none;position:absolute;left:0;top:0;z-index:8;";for(var n in t.options.pageStyle)i.style[h(n)]=t.options.pageStyle;0==e&&(i.style.display="block")}),this._transitionProperty(this.options.transitionProperty)},refresh:function(){var t=this;this.pageWidth=this.options.width?this.options.width:this.wrapper.clientWidth?this.wrapper.clientWidth:window.innerWidth,this.pageHeight=this.options.height?this.options.height:this.wrapper.clientHeight?this.wrapper.clientHeight:window.innerHeight,this.wrapper.style.width=this.pageWidth,this.wrapper.style.height=this.pageHeight,e(this.page,function(e,i){i.style.width=t.pageWidth,i.style.height=t.pageHeight}),this.emit("mPageRefresh")},_start:function(t){if(this.options.ImgTouch&&"IMG"==t.target.tagName&&t.preventDefault(),!(1!=f[t.type]&&0!==t.button||this.initiated&&f[t.type]!==this.initiated||this.moved)){this.initiated=f[t.type],this.moved=!1;var e=t.touches?t.touches[0]:t;this.pointY=e.pageY,this.startY=e.pageY,this.directionX=0,this.directionY=0,this.directionLocked=0,this.emit("mPageStart")}},_move:function(t){if(t.preventDefault(),f[t.type]===this.initiated&&!this.moved&&this.pointY&&0!=this.pointY){var e,i,n,s,o=t.touches?t.touches[0]:t,a=o.pageY-this.pointY;if(this.pointY=o.pageY,!this.pagePosition())return this.pointY=this.startY,void 0;s=this.pagePosition()[0],n=this.pagePosition()[1],e=(this.y+a)/this.options.moveY,i=this.nextY+a,this.scale=1-Math.abs((this.pointY-this.startY)*this.options.scale/this.pageHeight),!this.options.single&&this._translate(n,0,e,this.scale),this._translate(s,0,i),this.y=e,this.nextY=i,this.emit("mPageMove")}},pagePosition:function(){var t,e,i,n=this.page[this.pageNow],s=this.pointY-this.startY;if(this.directionY=s>0?"down":"up",this.directionY!=this.directionLocked?(e=!0,this.directionLocked=this.directionY):e=!1,0>=s)if(this.pageNow==this.pageNum-1&&this.options.cycle)this.pageNext=0;else{if(this.pageNow==this.pageNum-1)return this.pageNext=null,!1;this.pageNext=this.pageNow+1}else if(0==this.pageNow){if(!this.options.firstChange||!this.options.cycle)return this.pageNext=null,!1;this.pageNext=this.pageNum-1}else this.pageNext=this.pageNow-1;return t=this.page[this.pageNext],i=[t,n],e&&(this.nextY="up"==this.directionY?this.pageHeight:-this.pageHeight,t.style.display="block",t.style.zIndex="9"),i},_end:function(t){if(f[t.type]===this.initiated){if(!(Math.abs(this.pointY-this.startY)>10)||isNaN(this.pageNext))return this.initiated=0,this.directionY=0,this.directionLocked=0,this.moved=!1,void 0;this.moved=!0;var e=this.pointY-this.startY,i=this.page[this.pageNow],n=this.page[this.pageNext];Math.abs(e)>=this.options.translateThreshold?(this.nextY=0,this.y=e>0?this.pageHeight/this.options.moveY:-this.pageHeight/this.options.moveY,this.scale=1-this.options.scale):(this.y=0,this.nextY=e>0?-this.pageHeight:this.pageHeight,this.scale=1),!this.options.single&&this._transitionTo(i,0,this.y,this.scale,this.options.transitionTime,this.options.easingType),this._transitionTo(n,0,this.nextY,1,this.options.transitionTime,this.options.easingType),this.emit("mPageEnd")}},_transitionTo:function(t,e,i,n,s,o){t&&(n=n||1,o=o||this.options.easingType,this.isInTransition=s>0,this._transitionTimingFunction(t,o),this._transitionTime(t,s),this._translate(t,e,i,n))},_transitionProperty:function(t){var t=t||"all";e(this.page,function(e,i){i.style[h("transitionProperty")]=t})},_transitionTime:function(t,e){e=e||0,t.style[h("transitionDuration")]=e+"ms"},_transitionTimingFunction:function(t,e){t.style[h("transitionTimingFunction")]=e},_translate:function(t,e,i,n){t&&(n=n||1,this.options.useTransform?t.style[h("transform")]="translate("+e+"px,"+i+"px) scale("+n+")"+p():(e=Math.round(e),i=Math.round(i),t.style.left=e+"px",t.style.top=i+"px"),this.emit("mPageTranslate"))},_transitionEnd:function(){this.isInTransition&&(this.moved=!1,this.isInTransition=0,Math.abs(this.pointY-this.startY)>=this.options.translateThreshold?this._pageSuccess():this._pageFial(),this.x=0,this.y=0,this.initiated=0,this.directionY=0,this.directionLocked=0,this.emit("mPageTransitionEnd"))},_pageSuccess:function(){var t=this.page[this.pageNow],e=this.page[this.pageNext];0==this.pageNext&&this.pageNow==this.pageNum-1&&(this.firstChange=!0),t.style.display="none",t.style[h("transform")]="",e.style[h("transform")]="",e.style.zIndex="8",this.pageNow=this.pageNext,this.pageNext=null,a(t,"z-animate"),o(e,"z-animate"),this.emit("mPageSuccess",{now:t,next:e})},_pageFial:function(){var t=this.page[this.pageNow],e=this.page[this.pageNext];e.style.display="none",t.style[h("transform")]="",e.style[h("transform")]="",e.style.zIndex="8",this.pageNext=null,this.emit("mPageFial",{now:t,next:e})},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.resizePolling)}},c}),function(t,e){var i="function"==typeof define,n="undefined"!=typeof module&&module.exports;i?define("dist/component_module/preLoad/preLoad",[],e):n?module.exports=e():this[t]=e()}("PreLoad",function(){function t(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function e(t,e,h){if(!t||!o(t)||!r(t))throw Error("传入的图片集合不正确，确保是数组或者是对象；");var p=arguments.length;2===p&&(a(e)||s(e)?h=void 0:!a(e)&&n(e)&&(h=e,e=void 0)),this.imgItems=t,this.imgPreUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",void 0===e||""==e?(this.progressNode=document.createElement("div"),document.body.appendChild(this.progressNode)):this.progressNode=s(e)?document.querySelector(e):e,this.events={},this.prefix="",this.vision="1.0",this.contentText=this,this.progressInit=!0;for(i in h)this[i]=h[i];this.load()}var n=t("Object"),s=t("String"),o=Array.isArray||t("Array");t("Function");var a=function(t){return null!=t&&t.nodeType==t.ELEMENT_NODE},r=function(t){return"number"==typeof t.length};Object.prototype.length=function(){var t,e=0;for(t in obj)obj.hasOwnProperty(t)&&e++;return e},_forEach=function(t,e){var i,n;if(r(t)){for(i=0;t.length>i;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t};var h=/(^data:.*?;base64)|(\.(jpg|png|gif)$)/;return e.prototype={emit:function(t){if(this.events[t]){var e=0,i=this.events[t].length;if(i)for(;i>e;e++)this.events[t][e].apply(this,[].slice.call(arguments,1))}},on:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},load:function(){var t=0,e=this.imgItems,i=this.imgItems.length,n=this;n.emit("preLoadBefore"),_forEach(e,function(e,s){if(!h.test(s)){var o=e+1;console.log("第"+o+"个图片地址值不正确"),s=this.imgPreUrl}var a=new Image,r=n.prefix+s+(n.vision?"?vision="+n.vision:"");a.onload=a.onerror=a.onabort=function(){++t===i&&n.emit("preLoadComplete"),n.progressInit&&(n.progressNode.innerText=Math.floor(100*t/i)+"%"),n.emit("preLoadProgress")},a.src=r})}},e}),function(t,e){var i="function"==typeof define,n="undefined"!=typeof module&&module.exports;i?define("dist/component_module/svgAni/svgAni",[],e):n?module.exports=e():this[t]=e()}("SvgAni",function(){function t(t){this.el=t,this.current_frame=0,this.total_frames=100,this.path=[],this.length=[],this.handle=0,this.init()}for(var e=0,i=["webkit","moz",""],n=0,s=i.length;s>n&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"]||window[i[n]+"CancelRequestAnimationFrame"];return window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),s=window.setTimeout(function(){t(i+n)},n);return e=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),t.prototype={init:function(){var t=this;[].slice.call(t.el.querySelectorAll("path")).forEach(function(e,i){if(t.path[i]=e,"function"==typeof t.path[i].getTotalLength){var n=t.path[i].getTotalLength();t.length[i]=n,t.path[i].style.strokeDasharray=n+" "+n,t.path[i].style.strokeDashoffset=n}})},render:function(){this.rendered||(this.rendered=!0,this.draw())},draw:function(){var t=this,e=this.current_frame/this.total_frames;if(e>1)window.cancelAnimationFrame(this.handle);else{this.current_frame++;for(var i=0,n=this.path.length;n>i;i++)this.path[i].style.strokeDashoffset=Math.floor(this.length[i]*(1-e));this.handle=window.requestAnimationFrame(function(){t.draw()})}}},t}),function(t,e){var i="function"==typeof define,n="undefined"!=typeof module&&module.exports;i?define("dist/component_module/gifAni/gifAni",[],e):n?module.exports=e():this[t]=e()}("GifAni",function(){function t(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function e(t,e){var i,n;if(a(t)){for(i=0;t.length>i;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t}function n(t,e,i,n){n=n?!0:!1,t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function s(t){this.gifs=document.querySelectorAll?document.querySelectorAll("[data-gif]"):[],this.gifArr=[],this.gifWidth=100,this.gifHeight=100,this.events={},this.eventType="click",this.eventInit=!0,this.isLoad=!0;for(i in t)this[i]=t[i];this.init()}t("Object"),t("String");var o=Array.isArray||t("Array");t("Function");var a=function(t){return"number"==typeof t.length};return Function.prototype.bind=Function.prototype.bind||function(t){var e=this;return function(i){o(i)||(i=[i]),e.apply(t,i)}},s.prototype={init:function(){this.gifInit()},emit:function(t){if(this.events[t]){var e=0,i=this.events[t].length;if(i)for(;i>e;e++)this.events[t][e].apply(this,[].slice.call(arguments,1))}},on:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},gifInit:function(){var t=this,i=this.gifs.length,n=0;e(this.gifs,function(e,s){var o=s.dataset.gif,a=new Image;a.onload=a.onerror=a.onabort=function(){++n===i&&t.emit("instanceComplete"),t.gifInstance(e,s,a),t.emit("instanceProgress")},a.src=o})},gifInstance:function(t,e,i){var s=e.dataset.gifWidth?e.dataset.gifWidth:this.gifWidth,o=e.dataset.gifHeight?e.dataset.gifHeight:this.gifHeight,a=e.dataset.gifLoad,r=document.createElement("DIV");r.style.cssText="position:relative;cursor:pointer;width:"+s+"px;height:"+o+"px;",r.dataset.play="false",r.dataset.index=t,i.width=s,i.height=o;var h=document.createElement("DIV");h.style.cssText="position:absolute;left:"+(s/2-30)+"px;top:"+(o/2-30)+"px;width:60px;height:60px;border-radius:30px;background:rgba(0, 0, 0, 0.3);";var p=document.createElement("DIV");p.style.cssText="position:absolute;left:26px;top:16px;width:0;height:0;border-top:14px solid transparent;border-bottom:14px solid transparent;border-left:14px solid rgba(0, 0, 0, 0.5);";var c=document.createElement("canvas");c.width=s,c.height=o,c.getContext("2d").drawImage(i,0,0,s,o),h.appendChild(p),r.appendChild(h),r.appendChild(c),e.appendChild(r),this.eventInit&&n(r,this.eventType,this.gifEvent.bind(this,t),!1),this.gifArr[t]={img:i,con:r,play:h,cav:c},this.isLoad&&"true"==a&&n(window,"load",this.gifShow.bind(this,t),!1)},gifEvent:function(t){var e=this.gifArr[t],i=e.con,n=i.dataset.play;"true"==n?this.gifHide(t):this.gifShow(t)},gifShow:function(t){var e=this.gifArr[t],i=e.con,n=e.play,s=e.cav,o=e.img;i.removeChild(n),i.removeChild(s),i.appendChild(o),i.dataset.play="true",this.emit("gifShow")},gifHide:function(t){var e=this.gifArr[t],i=e.con,n=e.play,s=e.cav,o=e.img;i.appendChild(n),i.appendChild(s),i.removeChild(o),i.dataset.play="false",this.emit("gifHide")}},s}),define("dist/view/demo/js/event",[],function(t,e,i){var n={audioPlay:function(){var t=$(".u-audio").data("media");t.audioNode.addClass("z-show")},audioPause:function(){var t=$(".u-audio").data("media");t.audioNode.removeClass("z-show")},audioClick:function(){var t=$(".u-audio").data("media");t.audio.paused?t.audio.play():t.audio.pause()},applyOpen:function(){var t=$("#J_frame").data("form").domObj;t.removeClass("f-hide");var e=$(".p-ct .pageWrap").data("page");e.initEvents(!0),e.page.eq(e.pageNow).find(".m-page-ct .content").addClass("z-stop");var i=$(window).height();$(document.body).css("height",i),$(window).off("touchmove scroll");var n=e.page.eq(e.pageNow).data("position");t.find('input[name="position"]').val(n)},applyClose:function(){var t=$(".p-ct .pageWrap").data("page");t.initEvents(!1),t.page.eq(t.pageNow).find(".m-page-ct .content").removeClass("z-stop"),$(document.body).css("height","100%"),$(window).on("touchmove scroll",function(t){t.preventDefault()})},shareOpen:function(){var t=$(".p-ct .pageWrap").data("page");t.initEvents(!0),$(".u-ar-1").addClass("z-low"),$(".u-audio").addClass("z-low")},shareClose:function(){var t=$(".p-ct .pageWrap").data("page");t.initEvents(!1),$(".u-ar-1").removeClass("z-low"),$(".u-audio").removeClass("z-low")},pageSuccess:function(){var t=$(".p-ct .pageWrap").data("page");0==t.pageNext&&t.pageNow==t.pageNum-1&&(t.firstChange=!0),setTimeout(function(){t.pageNext==t.pageNum-1?($(".u-ar-1").addClass("f-hide"),$(".j-yunLaiAD-open").length>0&&($(".j-yunLaiAD-open").removeClass("f-hide"),setTimeout(function(){$(".j-yunLaiAD-open").addClass("z-show")},20))):($(".u-ar-1").removeClass("f-hide"),$(".j-yunLaiAD-open").length>0&&($(".j-yunLaiAD-open").addClass("f-hide"),$(".j-yunLaiAD-open").removeClass("z-show"))),t.page.eq(t.pageNow).addClass("f-hide").removeClass("z-animate"),t.page.eq(t.pageNow).attr("data-translate",""),t.page.eq(t.pageNow)[0].style[t.prefixStyle("transform")]="",t.page.eq(t.pageNow)[0].style[t.prefixStyle("transition")]="",t.page.eq(t.pageNext)[0].style[t.prefixStyle("transform")]="",t.page.eq(t.pageNext)[0].style[t.prefixStyle("transition")]="",t.page.eq(t.pageNext).removeClass("z-active"),t.pageNow=t.pageNext,t.moveStart=!0,t.moveFirst=!0,t.pageNext=null,t.page.eq(t.pageNow).attr("data-translate",""),t.touchDeltaY=0,t.page.eq(t.pageNow).addClass("z-animate")},500)},pageFial:function(){var t=$(".p-ct .pageWrap").data("page");setTimeout(function(){t.page.eq(t.pageNow).attr("data-translate",""),t.page.eq(t.pageNow)[0].style[t.prefixStyle("transform")]="",t.page.eq(t.pageNow)[0].style[t.prefixStyle("transition")]="",t.page.eq(t.pageNext)[0].style[t.prefixStyle("transform")]="",t.page.eq(t.pageNext)[0].style[t.prefixStyle("transition")]="",t.page.eq(t.pageNext).removeClass("z-active").addClass("f-hide"),t.moveStart=!0,t.moveFirst=!0,t.pageNext=null,t.touchDeltaY=0},500)},yunLaiADClose:function(){var t=$(".p-ct .pageWrap").data("page");t.initEvents(!1),$(".u-ar-1").addClass("z-low"),$(".u-audio").addClass("z-low")},yunLaiADOpen:function(){var t=$(".p-ct .pageWrap").data("page");t.initEvents(!0),$(".u-ar-1").removeClass("z-low"),$(".u-audio").removeClass("z-low")}};i.exports=n});